/*! MockGeolocation - v0.0.1 - 2014-12-07
* https://github.com/srizzo/mockgeolocation
* Copyright (c) 2014 Samuel Rizzo; Licensed MIT */
window.MockGeolocation={PERMISSION_DENIED:{PERMISSION_DENIED:1,POSITION_UNAVAILABLE:2,TIMEOUT:3,code:1,message:"Failed with error PERMISSION_DENIED"},POSITION_UNAVAILABLE:{PERMISSION_DENIED:1,POSITION_UNAVAILABLE:2,TIMEOUT:3,code:2,message:"Failed with error POSITION_UNAVAILABLE"},TIMEOUT:{PERMISSION_DENIED:1,POSITION_UNAVAILABLE:2,TIMEOUT:3,code:3,message:"Failed with error TIMEOUT"},_SUCCESS:0,_ERROR:1,_watchers:[],_currentError:null,_currentPosition:null,_askedForCurrentPositionBeforeInitialized:[],_reset:function(){this._currentError=null,this._currentPosition=null,this._askedForCurrentPositionBeforeInitialized=[],this._watchers=[]},_wasInitialized:function(){return null!=this._currentError||null!=this._currentPosition},_asyncExec:function(a,b){setTimeout(function(){a(b)},0)},_execCallback:function(a){this._currentError&&a[this._ERROR]?this._asyncExec(a[this._ERROR],this._currentError):this._currentPosition&&a[this._SUCCESS]&&this._asyncExec(a[this._SUCCESS],this._currentPosition)},_callbackWatchers:function(){for(var a=0;a<this._askedForCurrentPositionBeforeInitialized.length;a++)this._execCallback(this._askedForCurrentPositionBeforeInitialized[a]);this._askedForCurrentPositionBeforeInitialized=[];for(var b=0;b<this._watchers.length;b++)this._watchers[b]&&this._execCallback(this._watchers[b])},setCurrentError:function(a){this._currentPosition=null,this._currentError=a,a&&this._callbackWatchers()},setCurrentPosition:function(a){this._currentError=null,this._currentPosition=a,a&&this._callbackWatchers()},setCurrentLatLng:function(a,b){this.setCurrentPosition({coords:{latitude:a,longitude:b,accuracy:65}})}},navigator.geolocation||(window.navigator.geolocation={}),navigator.geolocation.getCurrentPosition=function(a,b){MockGeolocation._wasInitialized()?MockGeolocation._execCallback([a,b]):MockGeolocation._askedForCurrentPositionBeforeInitialized.push([a,b])},navigator.geolocation.watchPosition=function(a,b){return MockGeolocation._wasInitialized()&&MockGeolocation._execCallback([a,b]),MockGeolocation._watchers.push([a,b])-1},navigator.geolocation.clearWatch=function(a){MockGeolocation._watchers[a]=null};